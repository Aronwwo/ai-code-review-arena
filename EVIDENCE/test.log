============================= test session starts ==============================
platform darwin -- Python 3.11.14, pytest-7.4.4, pluggy-1.6.0 -- /Users/aronw/Desktop/ai-code-review-arena-main/backend/.venv311/bin/python
cachedir: .pytest_cache
rootdir: /Users/aronw/Desktop/ai-code-review-arena-main
plugins: anyio-4.12.1, asyncio-0.23.3, cov-4.1.0
asyncio: mode=Mode.STRICT
collecting ... collected 72 items

backend/tests/test_access.py::test_verify_project_access_success PASSED  [  1%]
backend/tests/test_access.py::test_verify_project_access_not_found PASSED [  2%]
backend/tests/test_access.py::test_verify_project_access_forbidden PASSED [  4%]
backend/tests/test_access.py::test_verify_review_access_success PASSED   [  5%]
backend/tests/test_access.py::test_verify_review_access_not_found PASSED [  6%]
backend/tests/test_access.py::test_verify_review_access_forbidden PASSED [  8%]
backend/tests/test_arena_cache.py::test_stats_and_rankings_cache_invalidated_on_vote PASSED [  9%]
backend/tests/test_arena_integration.py::TestArenaSessionCreation::test_create_arena_session_success PASSED [ 11%]
backend/tests/test_arena_integration.py::TestArenaSessionCreation::test_create_arena_session_missing_role_in_schema_a PASSED [ 12%]
backend/tests/test_arena_integration.py::TestArenaSessionCreation::test_create_arena_session_missing_role_in_schema_b PASSED [ 13%]
backend/tests/test_arena_integration.py::TestArenaSessionCreation::test_create_arena_session_nonexistent_project PASSED [ 15%]
backend/tests/test_arena_integration.py::TestArenaVoting::test_vote_for_candidate_a PASSED [ 16%]
backend/tests/test_arena_integration.py::TestArenaVoting::test_vote_requires_authentication PASSED [ 18%]
backend/tests/test_arena_integration.py::TestArenaVoting::test_vote_invalid_choice PASSED [ 19%]
backend/tests/test_arena_integration.py::TestArenaRankings::test_get_rankings_empty PASSED [ 20%]
backend/tests/test_arena_integration.py::TestArenaRankings::test_rankings_updated_after_vote PASSED [ 22%]
backend/tests/test_arena_integration.py::TestArenaSessionRetrieval::test_get_arena_session_by_id PASSED [ 23%]
backend/tests/test_arena_integration.py::TestArenaSessionRetrieval::test_get_arena_session_not_found PASSED [ 25%]
backend/tests/test_arena_integration.py::TestArenaSessionRetrieval::test_list_arena_sessions PASSED [ 26%]
backend/tests/test_arena_integration.py::TestArenaSessionRetrieval::test_arena_session_access_control PASSED [ 27%]
backend/tests/test_arena_parallel.py::test_conduct_arena_uses_asyncio_gather PASSED [ 29%]
backend/tests/test_auth.py::test_register_user PASSED                    [ 30%]
backend/tests/test_auth.py::test_register_duplicate_email PASSED         [ 31%]
backend/tests/test_auth.py::test_login PASSED                            [ 33%]
backend/tests/test_auth.py::test_login_invalid_credentials PASSED        [ 34%]
backend/tests/test_council_e2e.py::TestCouncilModeE2E::test_complete_council_review_workflow PASSED [ 36%]
backend/tests/test_council_e2e.py::TestCouncilModeE2E::test_council_review_with_moderator_types PASSED [ 37%]
backend/tests/test_council_e2e.py::TestCouncilModeE2E::test_council_review_with_per_agent_configs PASSED [ 38%]
backend/tests/test_council_e2e.py::TestCouncilReviewFiltering::test_filter_issues_by_severity PASSED [ 40%]
backend/tests/test_elo.py::test_win_loss_fixed_delta_default_k PASSED    [ 41%]
backend/tests/test_elo.py::test_draw_fixed_delta_default_k_with_favorite_penalty PASSED [ 43%]
backend/tests/test_elo.py::test_dynamic_k_factor_scales_delta PASSED     [ 44%]
backend/tests/test_elo.py::test_get_k_factor_thresholds PASSED           [ 45%]
backend/tests/test_email_validation.py::test_validate_email_format_valid PASSED [ 47%]
backend/tests/test_email_validation.py::test_validate_email_format_development_tlds PASSED [ 48%]
backend/tests/test_email_validation.py::test_validate_email_format_invalid_no_at PASSED [ 50%]
backend/tests/test_email_validation.py::test_validate_email_format_invalid_empty PASSED [ 51%]
backend/tests/test_email_validation.py::test_validate_email_format_invalid_no_domain PASSED [ 52%]
backend/tests/test_email_validation.py::test_validate_email_format_invalid_no_username PASSED [ 54%]
backend/tests/test_email_validation.py::test_validate_email_format_invalid_no_tld PASSED [ 55%]
backend/tests/test_email_validation.py::test_validate_email_format_invalid_spaces PASSED [ 56%]
backend/tests/test_email_validation.py::test_validate_email_format_invalid_special_chars PASSED [ 58%]
backend/tests/test_email_validation.py::test_validate_email_format_normalizes_case PASSED [ 59%]
backend/tests/test_email_validation.py::test_validate_email_format_strips_nothing PASSED [ 61%]
backend/tests/test_email_validation.py::test_validate_email_format_multiple_dots PASSED [ 62%]
backend/tests/test_email_validation.py::test_validate_email_format_hyphen_domain PASSED [ 63%]
backend/tests/test_email_validation.py::test_validate_email_format_subdomain PASSED [ 65%]
backend/tests/test_email_validation.py::test_validate_email_format_long_tld PASSED [ 66%]
backend/tests/test_file_validation.py::test_validate_code_content_valid_python PASSED [ 68%]
backend/tests/test_file_validation.py::test_validate_code_content_empty PASSED [ 69%]
backend/tests/test_file_validation.py::test_validate_code_content_too_short PASSED [ 70%]
backend/tests/test_file_validation.py::test_validate_code_content_whitespace_only PASSED [ 72%]
backend/tests/test_file_validation.py::test_validate_code_content_non_printable_characters PASSED [ 73%]
backend/tests/test_file_validation.py::test_validate_code_content_repeated_lines PASSED [ 75%]
backend/tests/test_file_validation.py::test_validate_code_content_normal_repetition PASSED [ 76%]
backend/tests/test_file_validation.py::test_validate_code_content_various_languages PASSED [ 77%]
backend/tests/test_file_validation.py::test_validate_code_content_unicode PASSED [ 79%]
backend/tests/test_file_validation.py::test_validate_code_content_long_file PASSED [ 80%]
backend/tests/test_llm_fallback.py::TestRefusalDetection::test_is_refusal_detects_polish_refusal PASSED [ 81%]
backend/tests/test_llm_fallback.py::TestRefusalDetection::test_is_refusal_detects_english_refusal PASSED [ 83%]
backend/tests/test_llm_fallback.py::TestRefusalDetection::test_is_refusal_does_not_detect_normal_response PASSED [ 84%]
backend/tests/test_llm_fallback.py::TestRefusalDetection::test_is_refusal_checks_only_beginning PASSED [ 86%]
backend/tests/test_llm_fallback.py::TestFallbackMechanism::test_mock_provider_always_succeeds PASSED [ 87%]
backend/tests/test_llm_fallback.py::TestFallbackMechanism::test_provider_router_handles_invalid_provider_gracefully PASSED [ 88%]
backend/tests/test_llm_fallback.py::TestFallbackMechanism::test_retry_sanitizes_combat_language PASSED [ 90%]
backend/tests/test_llm_fallback.py::TestFallbackMechanism::test_refusal_triggers_fallback_to_mock PASSED [ 91%]
backend/tests/test_llm_fallback.py::TestFallbackLogging::test_provider_router_logs_llm_calls PASSED [ 93%]
backend/tests/test_moderator_summary.py::test_store_moderator_issues_creates_issues PASSED [ 94%]
backend/tests/test_review_validation.py::test_review_requires_review_mode PASSED [ 95%]
backend/tests/test_review_validation.py::test_review_requires_moderator_config PASSED [ 97%]
backend/tests/test_review_validation.py::test_review_rejects_empty_prompt PASSED [ 98%]
backend/tests/test_review_validation.py::test_arena_requires_prompt_in_schema PASSED [100%]

=============================== warnings summary ===============================
backend/.venv311/lib/python3.11/site-packages/passlib/utils/__init__.py:854
  /Users/aronw/Desktop/ai-code-review-arena-main/backend/.venv311/lib/python3.11/site-packages/passlib/utils/__init__.py:854: DeprecationWarning: 'crypt' is deprecated and slated for removal in Python 3.13
    from crypt import crypt as _crypt

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
======================== 72 passed, 1 warning in 44.36s ========================
